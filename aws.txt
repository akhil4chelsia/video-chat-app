Lambda env variables
----------------------

CONNECTION_TABLE	webrtc-videochat-connection-table
WS_API_GATEWAY_URL	wss://h6ae1orck3.execute-api.ap-south-1.amazonaws.com/api
WS_CONNECTION_URL	https://h6ae1orck3.execute-api.ap-south-1.amazonaws.com/api

Lambda Role Permissions
------------------------
AWSLambdaTracerAccessExecutionRole-834ecfea-6a81-49ff-9652-52b7e1d9f77e
AWSLambdaBasicExecutionRole-ae86bd17-a1bb-4e74-b9f3-aca83af13ab4
AmazonAPIGatewayInvokeFullAccess
AmazonAPIGatewayPushToCloudWatchLogs
AmazonDynamoDBFullAccess
AdministratorAccess
AmazonAPIGatewayAdministrator
AWSOpsWorksCloudWatchLogs

DynamoDB schema
----------------------

{
    "SessionId" : "abcd123"
    "InitPeerConnectionId" : "123",
    "NonInitPeerConnectionId" : ""
    "Status" : "WAITING"
}

{
    "SessionId" : "abcd123"
    "InitPeerConnectionId" : "123",
    "NonInitPeerConnectionId" : "567"
    "Status" : "CONNNECTED"
}

response = table.query(
  KeyConditionExpression=Key('Status').eq('WAITING') & Key('SessionId').begins_with('abcd123')
)
print(response['Items'])


table.update_item(
    Key={
        'Status': 'WAITING',
        'SessionId': session_id
    },
    UpdateExpression="set NonInitPeerConnectionId = :p, Status=:s",
    ExpressionAttributeValues={
        ':p': peer_connection_id,
        ':s': "CONNECTED"
    }
)

